{"remainingRequest":"/Users/limengge/Desktop/yfx-info/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/limengge/Desktop/yfx-info/src/views/home/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/limengge/Desktop/yfx-info/src/views/home/Index.vue","mtime":1618569393874},{"path":"/Users/limengge/Desktop/yfx-info/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/limengge/Desktop/yfx-info/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/limengge/Desktop/yfx-info/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/limengge/Desktop/yfx-info/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBXZWIzIGZyb20gJ3dlYjMnOwoKbGV0IHdlYjM7CmNvbnN0IGFiaSA9IFsKICB7CiAgICAiaW5wdXRzIjogWwogICAgICB7CiAgICAgICAgImludGVybmFsVHlwZSI6ICJhZGRyZXNzIiwKICAgICAgICAibmFtZSI6ICJ0b2tlbl8iLAogICAgICAgICJ0eXBlIjogImFkZHJlc3MiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAiaW50ZXJuYWxUeXBlIjogImJ5dGVzMzIiLAogICAgICAgICJuYW1lIjogIm1lcmtsZVJvb3RfIiwKICAgICAgICAidHlwZSI6ICJieXRlczMyIgogICAgICB9CiAgICBdLAogICAgInN0YXRlTXV0YWJpbGl0eSI6ICJub25wYXlhYmxlIiwKICAgICJ0eXBlIjogImNvbnN0cnVjdG9yIgogIH0sCiAgewogICAgImFub255bW91cyI6IGZhbHNlLAogICAgImlucHV0cyI6IFsKICAgICAgewogICAgICAgICJpbmRleGVkIjogZmFsc2UsCiAgICAgICAgImludGVybmFsVHlwZSI6ICJ1aW50MjU2IiwKICAgICAgICAibmFtZSI6ICJpbmRleCIsCiAgICAgICAgInR5cGUiOiAidWludDI1NiIKICAgICAgfSwKICAgICAgewogICAgICAgICJpbmRleGVkIjogZmFsc2UsCiAgICAgICAgImludGVybmFsVHlwZSI6ICJhZGRyZXNzIiwKICAgICAgICAibmFtZSI6ICJhY2NvdW50IiwKICAgICAgICAidHlwZSI6ICJhZGRyZXNzIgogICAgICB9LAogICAgICB7CiAgICAgICAgImluZGV4ZWQiOiBmYWxzZSwKICAgICAgICAiaW50ZXJuYWxUeXBlIjogInVpbnQyNTYiLAogICAgICAgICJuYW1lIjogImFtb3VudCIsCiAgICAgICAgInR5cGUiOiAidWludDI1NiIKICAgICAgfQogICAgXSwKICAgICJuYW1lIjogIkNsYWltZWQiLAogICAgInR5cGUiOiAiZXZlbnQiCiAgfSwKICB7CiAgICAiaW5wdXRzIjogW10sCiAgICAibmFtZSI6ICJtZXJrbGVSb290IiwKICAgICJvdXRwdXRzIjogWwogICAgICB7CiAgICAgICAgImludGVybmFsVHlwZSI6ICJieXRlczMyIiwKICAgICAgICAibmFtZSI6ICIiLAogICAgICAgICJ0eXBlIjogImJ5dGVzMzIiCiAgICAgIH0KICAgIF0sCiAgICAic3RhdGVNdXRhYmlsaXR5IjogInZpZXciLAogICAgInR5cGUiOiAiZnVuY3Rpb24iLAogICAgImNvbnN0YW50IjogdHJ1ZQogIH0sCiAgewogICAgImlucHV0cyI6IFtdLAogICAgIm5hbWUiOiAidG9rZW4iLAogICAgIm91dHB1dHMiOiBbCiAgICAgIHsKICAgICAgICAiaW50ZXJuYWxUeXBlIjogImFkZHJlc3MiLAogICAgICAgICJuYW1lIjogIiIsCiAgICAgICAgInR5cGUiOiAiYWRkcmVzcyIKICAgICAgfQogICAgXSwKICAgICJzdGF0ZU11dGFiaWxpdHkiOiAidmlldyIsCiAgICAidHlwZSI6ICJmdW5jdGlvbiIsCiAgICAiY29uc3RhbnQiOiB0cnVlCiAgfSwKICB7CiAgICAiaW5wdXRzIjogWwogICAgICB7CiAgICAgICAgImludGVybmFsVHlwZSI6ICJ1aW50MjU2IiwKICAgICAgICAibmFtZSI6ICJpbmRleCIsCiAgICAgICAgInR5cGUiOiAidWludDI1NiIKICAgICAgfQogICAgXSwKICAgICJuYW1lIjogImlzQ2xhaW1lZCIsCiAgICAib3V0cHV0cyI6IFsKICAgICAgewogICAgICAgICJpbnRlcm5hbFR5cGUiOiAiYm9vbCIsCiAgICAgICAgIm5hbWUiOiAiIiwKICAgICAgICAidHlwZSI6ICJib29sIgogICAgICB9CiAgICBdLAogICAgInN0YXRlTXV0YWJpbGl0eSI6ICJ2aWV3IiwKICAgICJ0eXBlIjogImZ1bmN0aW9uIiwKICAgICJjb25zdGFudCI6IHRydWUKICB9LAogIHsKICAgICJpbnB1dHMiOiBbCiAgICAgIHsKICAgICAgICAiaW50ZXJuYWxUeXBlIjogInVpbnQyNTYiLAogICAgICAgICJuYW1lIjogImluZGV4IiwKICAgICAgICAidHlwZSI6ICJ1aW50MjU2IgogICAgICB9LAogICAgICB7CiAgICAgICAgImludGVybmFsVHlwZSI6ICJhZGRyZXNzIiwKICAgICAgICAibmFtZSI6ICJhY2NvdW50IiwKICAgICAgICAidHlwZSI6ICJhZGRyZXNzIgogICAgICB9LAogICAgICB7CiAgICAgICAgImludGVybmFsVHlwZSI6ICJ1aW50MjU2IiwKICAgICAgICAibmFtZSI6ICJhbW91bnQiLAogICAgICAgICJ0eXBlIjogInVpbnQyNTYiCiAgICAgIH0sCiAgICAgIHsKICAgICAgICAiaW50ZXJuYWxUeXBlIjogImJ5dGVzMzJbXSIsCiAgICAgICAgIm5hbWUiOiAibWVya2xlUHJvb2YiLAogICAgICAgICJ0eXBlIjogImJ5dGVzMzJbXSIKICAgICAgfQogICAgXSwKICAgICJuYW1lIjogImNsYWltIiwKICAgICJvdXRwdXRzIjogW10sCiAgICAic3RhdGVNdXRhYmlsaXR5IjogIm5vbnBheWFibGUiLAogICAgInR5cGUiOiAiZnVuY3Rpb24iCiAgfQpdOwoKY29uc3QgZGlzVHJpYnV0b3JBZGRyZXNzID0gJzB4QUUxRkIzYzE5NGM0MzExZjM2NDE0MzA5M0JkRTcxMEJkM2YwYWNFYyc7CmxldCBkaXNUcmlidXRvcjsKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2xhaW06ICJjbGFpbSIsCiAgICAgIHRleHRWYWx1ZTogJ+W9k+WJjeWcsOWdgO+8micsCiAgICAgIHRleHRWYWx1ZTE6ICflvZPliY1jaGFpbklkOicsCiAgICAgIGFkZHJlc3M6IHVuZGVmaW5lZCwKICAgICAgaW5kZXg6IHVuZGVmaW5lZCwKICAgICAgYW1vdW50OiB1bmRlZmluZWQsCiAgICAgIHByb29mOiB1bmRlZmluZWQsCiAgICB9CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgLy8gaW1wb3J0IGh0dHAgZnJvbSAnQC9yZXF1ZXN0L2FwaS5qcycKICAgIGlmICh0eXBlb2Ygd2luZG93LmV0aGVyZXVtICE9PSAndW5kZWZpbmVkJykgewogICAgICBjb25zb2xlLmxvZygnTWV0YU1hc2sgaXMgaW5zdGFsbGVkIScpOwogICAgfQoKICAgIHdlYjMgPSBuZXcgV2ViMyh3aW5kb3cuZXRoZXJldW0pOwogICAgZGlzVHJpYnV0b3IgPSBuZXcgd2ViMy5ldGguQ29udHJhY3QoYWJpLCBkaXNUcmlidXRvckFkZHJlc3MpOwoKICAgIGxldCBhY2NvdW50cyA9IGF3YWl0IHdpbmRvdy5ldGhlcmV1bS5yZXF1ZXN0KHttZXRob2Q6ICdldGhfcmVxdWVzdEFjY291bnRzJ30pOwogICAgbGV0IGFjY291bnQgPSBhY2NvdW50c1swXTsKICAgIHRoaXMudGV4dFZhbHVlID0gJ+W9k+WJjeWcsOWdgO+8micgKyBhY2NvdW50OwogICAgY29uc29sZS5sb2coJ2JhbGFuY2U6ICcgKyBhd2FpdCB3ZWIzLmV0aC5nZXRCYWxhbmNlKGFjY291bnQpKQoKICAgIHdpbmRvdy5ldGhlcmV1bS5vbignYWNjb3VudHNDaGFuZ2VkJywgKGFjY291bnRzKSA9PiB7CiAgICAgIGlmIChhY2NvdW50cy5sZW5ndGggPiAwKSB7CiAgICAgICAgYWNjb3VudCA9IGFjY291bnRzWzBdOwogICAgICAgIHRoaXMudGV4dFZhbHVlID0gJ+W9k+WJjeWcsOWdgO+8micgKyBhY2NvdW50OwogICAgICB9CiAgICB9KTsKCiAgICBsZXQgY2hpYW5JZCA9IGF3YWl0IGV0aGVyZXVtLnJlcXVlc3Qoe21ldGhvZDogJ2V0aF9jaGFpbklkJ30pOwogICAgaWYgKGNoaWFuSWQgPT09IDI1NikgewogICAgICB0aGlzLnRleHRWYWx1ZTEgPSAn5b2T5YmNY2hhaW5JZDonICsgY2hpYW5JZDsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMudGV4dFZhbHVlMSA9ICflvZPliY1jaGFpbklkOicgKyBjaGlhbklkICsgIiBuZXR3b3JrIGVycm9yIjsKICAgIH0KCiAgICB3aW5kb3cuZXRoZXJldW0ub24oJ2NoYWluQ2hhbmdlZCcsIGFzeW5jIChjaGFpbklkKSA9PiB7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgaWYgKGNoYWluSWQgPT09IDI1NikgewogICAgICAgIHRoaXMudGV4dFZhbHVlMSA9ICflvZPliY1jaGFpbklkOicgKyBjaGFpbklkOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGV4dFZhbHVlMSA9ICflvZPliY1jaGFpbklkOicgKyBjaGFpbklkICsgIiBuZXR3b3JrIGVycm9yIjsKICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBjbGFpbUZ1bmN0aW9uKCkgewogICAgICBheGlvcy5nZXQoJy9hcGkvbGVhZj9hZGRyZXNzPScgKyAiMHgwMzgxOTY1OWFGQWJmMzlBZEYyNkE4NEQ0Qjk0OTIyQmYwQ0Y2ZUQ0IikudGhlbihhc3luYyByZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpOwogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAxKSB7CiAgICAgICAgICByZXMgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgICBhd2FpdCBkaXNUcmlidXRvci5tZXRob2RzLmNsYWltKHJlcy51c2VyX2luZGV4LCByZXMuYWRkcmVzcywgcmVzLmFtb3VudCwgSlNPTi5wYXJzZShyZXMucHJvb2YpKS5zZW5kKCkKICAgICAgICAgIGFsZXJ0KCfpooblj5bmiJDlip8nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoJ+ayoeaciScpOwogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div>\n    <template>{{ textValue }}</template>\n    <div></div>\n    <template>{{ textValue1 }}</template>\n    <div></div>\n    <el-button @click=\"claimFunction\">{{ claim }}</el-button>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Web3 from 'web3';\n\nlet web3;\nconst abi = [\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"token_\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"merkleRoot_\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"index\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"account\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Claimed\",\n    \"type\": \"event\"\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"merkleRoot\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bytes32\",\n        \"name\": \"\",\n        \"type\": \"bytes32\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\",\n    \"constant\": true\n  },\n  {\n    \"inputs\": [],\n    \"name\": \"token\",\n    \"outputs\": [\n      {\n        \"internalType\": \"address\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\",\n    \"constant\": true\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"index\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"isClaimed\",\n    \"outputs\": [\n      {\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"stateMutability\": \"view\",\n    \"type\": \"function\",\n    \"constant\": true\n  },\n  {\n    \"inputs\": [\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"index\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"address\",\n        \"name\": \"account\",\n        \"type\": \"address\"\n      },\n      {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"internalType\": \"bytes32[]\",\n        \"name\": \"merkleProof\",\n        \"type\": \"bytes32[]\"\n      }\n    ],\n    \"name\": \"claim\",\n    \"outputs\": [],\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  }\n];\n\nconst disTributorAddress = '0xAE1FB3c194c4311f364143093BdE710Bd3f0acEc';\nlet disTributor;\n\nexport default {\n  data() {\n    return {\n      claim: \"claim\",\n      textValue: '当前地址：',\n      textValue1: '当前chainId:',\n      address: undefined,\n      index: undefined,\n      amount: undefined,\n      proof: undefined,\n    }\n  },\n  async mounted() {\n    // import http from '@/request/api.js'\n    if (typeof window.ethereum !== 'undefined') {\n      console.log('MetaMask is installed!');\n    }\n\n    web3 = new Web3(window.ethereum);\n    disTributor = new web3.eth.Contract(abi, disTributorAddress);\n\n    let accounts = await window.ethereum.request({method: 'eth_requestAccounts'});\n    let account = accounts[0];\n    this.textValue = '当前地址：' + account;\n    console.log('balance: ' + await web3.eth.getBalance(account))\n\n    window.ethereum.on('accountsChanged', (accounts) => {\n      if (accounts.length > 0) {\n        account = accounts[0];\n        this.textValue = '当前地址：' + account;\n      }\n    });\n\n    let chianId = await ethereum.request({method: 'eth_chainId'});\n    if (chianId === 256) {\n      this.textValue1 = '当前chainId:' + chianId;\n    } else {\n      this.textValue1 = '当前chainId:' + chianId + \" network error\";\n    }\n\n    window.ethereum.on('chainChanged', async (chainId) => {\n      window.location.reload();\n      if (chainId === 256) {\n        this.textValue1 = '当前chainId:' + chainId;\n      } else {\n        this.textValue1 = '当前chainId:' + chainId + \" network error\";\n      }\n    });\n  },\n  methods: {\n    async claimFunction() {\n      axios.get('/api/leaf?address=' + \"0x03819659aFAbf39AdF26A84D4B94922Bf0CF6eD4\").then(async res => {\n        console.log(res.data.data);\n        if (res.data.code === 1) {\n          res = res.data.data\n          console.log(res)\n          await disTributor.methods.claim(res.user_index, res.address, res.amount, JSON.parse(res.proof)).send()\n          alert('领取成功');\n        } else {\n          alert('没有');\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}