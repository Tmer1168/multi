{"remainingRequest":"/Users/limengge/Desktop/solidity/mdex/multi/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/limengge/Desktop/solidity/mdex/multi/src/views/index.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/Users/limengge/Desktop/solidity/mdex/multi/src/views/index.vue","mtime":1618823936073},{"path":"/Users/limengge/Desktop/solidity/mdex/multi/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/limengge/Desktop/solidity/mdex/multi/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/limengge/Desktop/solidity/mdex/multi/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/limengge/Desktop/solidity/mdex/multi/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/limengge/Desktop/solidity/mdex/multi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/limengge/Desktop/solidity/mdex/multi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmJvZHkgewogIGJhY2tncm91bmQtY29sb3I6ICNkOGUzZTc7CiAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCJodHRwOi8vemhvbmdndW9zZS5jb20vaW1nL3RleHR1cmUucG5nIik7Cn0KCi53YXRlcmZhbGwgewogIHdpZHRoOiA5MCU7CiAgY29sdW1uLWdhcDogMjBweDsKICBjb2x1bW4tY291bnQ6IDQ7CiAgbWFyZ2luOiAwIGF1dG87Cn0KCi5pdGVtIHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsKICBwYWRkaW5nOiAxMHB4OwogIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgYnJlYWstaW5zaWRlOiBhdm9pZDsKICBib3JkZXItcmFkaXVzOiA3cHg7CiAgYmFja2dyb3VuZDogI2Q4ZTNlNzsKICBib3gtc2hhZG93OiA1cHggNXB4IDhweCAjYzdkMWQ1LCAtNXB4IC01cHggOHB4ICNlOWY1Zjk7Cn0KCi5pdGVtOmhvdmVyIHsKICBvcGFjaXR5OiAwLjU7CiAgYmFja2dyb3VuZDogcmdiYSgkY29sb3I6ICMwMDAwMDAsICRhbHBoYTogMC42KTsKfQoKLm1hc2sgewogIG9wYWNpdHk6IDA7CiAgY29sb3I6IHJnYigyMzgsIDEzLCA1MSk7CiAgZm9udC1zaXplOiAxNnB4OwogIG92ZXJmbG93OiBoaWRkZW47CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMDsKICBsZWZ0OiAwOwogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTAwJTsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgLy8gei1pbmRleDogOTk5Owp9CgoubWFzazpob3ZlciB7CiAgb3BhY2l0eTogMTsKfQoKLm1hc2sgOmxhc3QtY2hpbGQgewogIG1hcmdpbjogMzBweDsKfQoKaW1nIHsKICB3aWR0aDogMTAwJTsKICBiYWNrZ3JvdW5kOiAjNzRlYmQ1OyAvKiBmYWxsYmFjayBmb3Igb2xkIGJyb3dzZXJzICovCiAgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoCiAgICAgICAgICB0byByaWdodCwKICAgICAgICAgICNhY2I2ZTUsCiAgICAgICAgICAjNzRlYmQ1CiAgKTsgLyogQ2hyb21lIDEwLTI1LCBTYWZhcmkgNS4xLTYgKi8KICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoCiAgICAgICAgICB0byByaWdodCwKICAgICAgICAgICNhY2I2ZTUsCiAgICAgICAgICAjNzRlYmQ1CiAgKTsgLyogVzNDLCBJRSAxMCsvIEVkZ2UsIEZpcmVmb3ggMTYrLCBDaHJvbWUgMjYrLCBPcGVyYSAxMissIFNhZmFyaSA3KyAqLwp9CgpwIHsKICBsaW5lLWhlaWdodDogMzBweDsKICBvdmVyZmxvdzogaGlkZGVuOwogIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICB3b3JkLWJyZWFrOiBicmVhay1hbGw7CiAgY29sb3I6ICM0NDQ7Cn0KCkBtZWRpYSAobWluLXdpZHRoOiA5OTJweCkgYW5kIChtYXgtd2lkdGg6IDEzMDBweCkgewogIC53YXRlcmZhbGwgewogICAgY29sdW1uLWNvdW50OiAzOwogIH0KfQoKQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSBhbmQgKG1heC13aWR0aDogOTkxcHgpIHsKICAud2F0ZXJmYWxsIHsKICAgIGNvbHVtbi1jb3VudDogMjsKICB9Cn0KCkBtZWRpYSAobWF4LXdpZHRoOiA3NjdweCkgewogIC53YXRlcmZhbGwgewogICAgY29sdW1uLWNvdW50OiAxOwogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4TA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div><!--最外层容器-->\n    <div style=\"float:right;margin:0 0 0 -800px; width:100%\">\n\n      <div style=\"margin:50px 0 0 800px; background:#00000000\">\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ mintTextValue }}</template>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <el-input v-model=\"input1\" placeholder=\"to\"></el-input>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <el-input v-model=\"input2\" placeholder=\"value\"></el-input>\n        </div>\n\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText7 }}</template>\n          <el-input v-model=\"multiTextInput9\" placeholder=\"签名信息\"></el-input>\n        </div>\n\n        <div>\n          <el-button @click=\"mintFunction\">{{ claim }}</el-button>\n        </div>\n\n        <div style=\"width:400px;margin:20px 0 0 0;background:#00000000\">\n          <template>{{ multiText8 }}</template>\n          <el-input v-model=\"multiTextInput10\" placeholder=\"\"></el-input>\n        </div>\n      </div>\n    </div>\n\n\n    <div style=\"float:left;margin:50px 0 0 100px ; background:#00000000\">\n\n      <div>\n        <template>{{ multiAddressList }}</template>\n      </div>\n      <div>\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText1 }}</template>\n          <el-input v-model=\"multiTextInput1\" placeholder=\"地址1\"></el-input>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText2 }}</template>\n          <el-input v-model=\"multiTextInput2\" placeholder=\"地址2\"></el-input>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText3 }}</template>\n          <el-input v-model=\"multiTextInput3\" placeholder=\"地址3\"></el-input>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText4 }}</template>\n          <el-input v-model=\"multiTextInput4\" placeholder=\"地址4\"></el-input>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText5 }}</template>\n          <el-input v-model=\"multiTextInput5\" placeholder=\"地址5\"></el-input>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText6 }}</template>\n          <el-input v-model=\"multiTextInput6\" placeholder=\"阈值\"></el-input>\n        </div>\n        <div style=\"width:400px;background:#00000000\">\n          <template>{{ multiText7 }}</template>\n          <el-input v-model=\"multiTextInput7\" placeholder=\"签名信息\"></el-input>\n        </div>\n\n        <div>\n          <el-button @click=\"editFunction\">{{ editAddress }}</el-button>\n        </div>\n\n        <div style=\"width:400px;margin:20px 0 0 0;background:#00000000\">\n          <template>{{ multiText8 }}</template>\n          <el-input v-model=\"multiTextInput8\" placeholder=\"\"></el-input>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {Component, Vue} from \"vue-property-decorator\";\n\nconst yfxToken = '41528d4f67c7055152052058cd9646c8e2cbfe729e';\nconst owner_address = '41384da1b1e9d08842d523872b4d42f62c0d97c74f';\n\n@Component\nexport default class Index extends Vue {\n  data() {\n    return {\n      multiAddressList: '多签地址成员列表：',\n      multiText1: '多签地址1（权重1）',\n      multiText2: '多签地址2（权重1）',\n      multiText3: '多签地址3（权重1）',\n      multiText4: '多签地址4（权重1）',\n      multiText5: '多签地址5（权重1）',\n      multiText6: '阈值',\n      multiText7: '多签数据(第一个签名不用输入)',\n      multiText8: '签名后的签名信息（通过通讯工具将签名后的信息发送给下一个需要签名的人）:',\n      multiTextInput1: '',\n      multiTextInput2: '',\n      multiTextInput3: '',\n      multiTextInput4: '',\n      multiTextInput5: '',\n      multiTextInput6: '',\n      multiTextInput7: '',\n      multiTextInput8: '',\n      multiTextInput9: '',\n      multiTextInput10: '',\n\n      claim: \"mint\",\n      mintTextValue: 'mint功能:',\n      input1: '',\n      input2: '',\n\n      editAddress: '修改权限',\n    }\n  },\n  async mounted() {\n    // import http from '@/request/api.js'\n    if (window.tronWeb && window.tronWeb.defaultAddress.base58) {\n      console.log(\"init tronweb success\");\n    }\n    //初始化数据\n    let accountdata = await window.tronWeb.trx.getAccount(owner_address)\n    console.log(accountdata)\n    if (accountdata.owner_permission.keys[0] !== undefined) {\n      this.multiTextInput1 = window.tronWeb.address.fromHex(accountdata.owner_permission.keys[0].address)\n    }\n    if (accountdata.owner_permission.keys[1] !== undefined) {\n      this.multiTextInput2 = window.tronWeb.address.fromHex(accountdata.owner_permission.keys[1].address)\n    }\n    if (accountdata.owner_permission.keys[2] !== undefined) {\n      this.multiTextInput3 = window.tronWeb.address.fromHex(accountdata.owner_permission.keys[2].address)\n    }\n    if (accountdata.owner_permission.keys[3] !== undefined) {\n      this.multiTextInput4 = window.tronWeb.address.fromHex(accountdata.owner_permission.keys[3].address)\n    }\n    if (accountdata.owner_permission.keys[4] !== undefined) {\n      this.multiTextInput5 = window.tronWeb.address.fromHex(accountdata.owner_permission.keys[4].address)\n    }\n\n    this.multiTextInput6 = accountdata.owner_permission.threshold\n  },\n\n  methods: {\n    async mintFunction() {\n    if (!window.tronWeb && !window.tronWeb.defaultAddress.base58) {\n    alert('未连接钱包')\n    return;\n  }\n  this.multiTextInput10 = '';\n  let accountdata = await window.tronWeb.trx.getAccount(owner_address)\n\n  if (this.multiTextInput9 === undefined || this.multiTextInput9 === '') {\n  let functionSelector = 'mint(address,uint256)';\n  let parameters = [{type: 'address', value: this.input1}, {type: 'uint', value: this.input2}];\n  let options = {};\n  let transaction = await window.tronWeb.transactionBuilder.triggerSmartContract(\n      yfxToken,\n      functionSelector,\n      options,\n      parameters,\n      window.tronWeb.defaultAddress.base58\n  );\n  console.log(transaction.transaction);\n\n  let signedTransaction = await window.tronWeb.trx.multiSign(transaction, 0);\n\n  let weightData = await window.tronWeb.trx.getSignWeight(signedTransaction, 0);\n  if (weightData.current_weight >= accountdata.owner_permission.threshold) {\n  const result = await window.tronWeb.trx.broadcast(signedTransaction);\n  console.log(result);\n} else {\n  console.log(JSON.stringify(signedTransaction));\n}\n}else {\n  let signedTransaction = await window.tronWeb.trx.multiSign(transaction, 0);\n\n  let weightData = await window.tronWeb.trx.getSignWeight(signedTransaction, 0);\n  if (weightData.current_weight >= accountdata.owner_permission.threshold) {\n    const result = await window.tronWeb.trx.broadcast(signedTransaction);\n    console.log(result);\n  } else {\n    this.multiTextInput10 = JSON.stringify(signedTransaction)\n  }\n}\n},\n\nasync editFunction() {\n  this.multiTextInput8 = '';\n  console.log(\"multiTextInput8: \" + this.multiTextInput8);\n  console.log('default address: ' + window.tronWeb.defaultAddress.base58)\n  if (!window.tronWeb && !window.tronWeb.defaultAddress.base58) {\n    alert('未连接钱包')\n    return;\n  }\n  let accountdata = await window.tronWeb.trx.getAccount(owner_address)\n\n  if (this.multiTextInput7 === undefined || this.multiTextInput7 === '') {\n    if (this.multiTextInput6 === undefined || this.multiTextInput6 === '') {\n      alert('请输入参数')\n      return;\n    }\n\n    if (this.multiTextInput1 === undefined || this.multiTextInput1 === '') {\n      alert('请输入参数')\n      return;\n    }\n\n    let ownerArr = [];\n    let activesArr = [];\n    let threshold = this.multiTextInput6;\n    let jsonData = {\n      \"owner_address\": owner_address,\n      \"owner\": {\n        \"type\": 0,\n        \"id\": 0,\n        \"permission_name\": \"owner\",\n        \"threshold\": Number.parseInt(threshold),\n        \"keys\": ownerArr\n      },\n      \"actives\": [{\n        \"type\": 2,\n        \"id\": 2,\n        \"permission_name\": \"active0\",\n        \"threshold\": Number.parseInt(threshold),\n        \"operations\": \"7fff1fc0037e0000000000000000000000000000000000000000000000000000\",\n        \"keys\": activesArr\n      }]\n    };\n\n    if (this.multiTextInput1 !== undefined && this.multiTextInput1 !== '') {\n      let option = {\n        address: window.tronWeb.address.toHex(this.multiTextInput1),\n        weight: 1\n      }\n      ownerArr.push(option);\n      activesArr.push(option);\n    }\n    if (this.multiTextInput2 !== undefined && this.multiTextInput2 !== '') {\n      let option = {\n        address: window.tronWeb.address.toHex(this.multiTextInput2),\n        weight: 1\n      }\n      ownerArr.push(option);\n      activesArr.push(option);\n    }\n    if (this.multiTextInput3 !== undefined && this.multiTextInput3 !== '') {\n      let option = {\n        address: window.tronWeb.address.toHex(this.multiTextInput3),\n        weight: 1\n      }\n      ownerArr.push(option);\n      activesArr.push(option);\n    }\n    if (this.multiTextInput4 !== undefined && this.multiTextInput4 !== '') {\n      let option = {\n        address: window.tronWeb.address.toHex(this.multiTextInput4),\n        weight: 1\n      }\n      ownerArr.push(option);\n      activesArr.push(option);\n    }\n    if (this.multiTextInput5 !== undefined && this.multiTextInput5 !== '') {\n      let option = {\n        address: window.tronWeb.address.toHex(this.multiTextInput5),\n        weight: 1\n      }\n      ownerArr.push(option);\n      activesArr.push(option);\n    }\n\n    console.log('transaction1:   ' + JSON.stringify(jsonData))\n\n    const url = 'https://api.shasta.trongrid.io/wallet/accountpermissionupdate';\n    const options = {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(jsonData)\n    };\n    console.log(1111)\n    fetch(url, options)\n        .then(res => res.json())\n        .then(async function (json) {\n          console.log('transaction2:   ' + JSON.stringify(json))\n          let signedTransaction = await window.tronWeb.trx.multiSign(json, 0);\n\n          let weightData = await window.tronWeb.trx.getSignWeight(signedTransaction, 0);\n          if (weightData.current_weight >= accountdata.owner_permission.threshold) {\n            const result = await window.tronWeb.trx.broadcast(signedTransaction);\n            console.log(result);\n          } else {\n            console.log(JSON.stringify(signedTransaction));\n          }\n        })\n        .catch(err => console.error('error:' + err));\n  } else {\n    console.log('transaction3:   ' + this.multiTextInput7)\n    let signedTransaction = await window.tronWeb.trx.multiSign(JSON.parse(this.multiTextInput7), 0);\n\n    let weightData = await window.tronWeb.trx.getSignWeight(signedTransaction, 0);\n    if (weightData.current_weight >= accountdata.owner_permission.threshold) {\n      const result = await window.tronWeb.trx.broadcast(signedTransaction);\n      console.log(result);\n    } else {\n      this.multiTextInput8 = JSON.stringify(signedTransaction);\n    }\n  }\n}\n}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\">\nbody {\n  background-color: #d8e3e7;\n  background-image: url(\"http://zhongguose.com/img/texture.png\");\n}\n\n.waterfall {\n  width: 90%;\n  column-gap: 20px;\n  column-count: 4;\n  margin: 0 auto;\n}\n\n.item {\n  position: relative;\n  background-color: #ffffff;\n  padding: 10px;\n  margin-bottom: 15px;\n  break-inside: avoid;\n  border-radius: 7px;\n  background: #d8e3e7;\n  box-shadow: 5px 5px 8px #c7d1d5, -5px -5px 8px #e9f5f9;\n}\n\n.item:hover {\n  opacity: 0.5;\n  background: rgba($color: #000000, $alpha: 0.6);\n}\n\n.mask {\n  opacity: 0;\n  color: rgb(238, 13, 51);\n  font-size: 16px;\n  overflow: hidden;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  // z-index: 999;\n}\n\n.mask:hover {\n  opacity: 1;\n}\n\n.mask :last-child {\n  margin: 30px;\n}\n\nimg {\n  width: 100%;\n  background: #74ebd5; /* fallback for old browsers */\n  background: -webkit-linear-gradient(\n          to right,\n          #acb6e5,\n          #74ebd5\n  ); /* Chrome 10-25, Safari 5.1-6 */\n  background: linear-gradient(\n          to right,\n          #acb6e5,\n          #74ebd5\n  ); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\n}\n\np {\n  line-height: 30px;\n  overflow: hidden;\n  white-space: pre-wrap;\n  word-break: break-all;\n  color: #444;\n}\n\n@media (min-width: 992px) and (max-width: 1300px) {\n  .waterfall {\n    column-count: 3;\n  }\n}\n\n@media (min-width: 768px) and (max-width: 991px) {\n  .waterfall {\n    column-count: 2;\n  }\n}\n\n@media (max-width: 767px) {\n  .waterfall {\n    column-count: 1;\n  }\n}\n</style>\n"]}]}